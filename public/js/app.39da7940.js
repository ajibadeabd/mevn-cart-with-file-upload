(function(t){function a(a){for(var r,c,o=a[0],i=a[1],l=a[2],p=0,d=[];p<o.length;p++)c=o[p],Object.prototype.hasOwnProperty.call(n,c)&&n[c]&&d.push(n[c][0]),n[c]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r]);u&&u(a);while(d.length)d.shift()();return s.push.apply(s,l||[]),e()}function e(){for(var t,a=0;a<s.length;a++){for(var e=s[a],r=!0,o=1;o<e.length;o++){var i=e[o];0!==n[i]&&(r=!1)}r&&(s.splice(a--,1),t=c(c.s=e[0]))}return t}var r={},n={app:0},s=[];function c(a){if(r[a])return r[a].exports;var e=r[a]={i:a,l:!1,exports:{}};return t[a].call(e.exports,e,e.exports,c),e.l=!0,e.exports}c.m=t,c.c=r,c.d=function(t,a,e){c.o(t,a)||Object.defineProperty(t,a,{enumerable:!0,get:e})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,a){if(1&a&&(t=c(t)),8&a)return t;if(4&a&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(c.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&a&&"string"!=typeof t)for(var r in t)c.d(e,r,function(a){return t[a]}.bind(null,r));return e},c.n=function(t){var a=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(a,"a",a),a},c.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},c.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],i=o.push.bind(o);o.push=a,o=o.slice();for(var l=0;l<o.length;l++)a(o[l]);var u=i;s.push([0,"chunk-vendors"]),e()})({0:function(t,a,e){t.exports=e("56d7")},"56d7":function(t,a,e){"use strict";e.r(a);e("cadf"),e("551c"),e("f751"),e("097d");var r=e("2b0e"),n=e("8c4f"),s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"app"}},[e("Navbar"),e("router-view")],1)},c=[],o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("Cards",{attrs:{products:t.products}}),e("p",{staticClass:"text-center mb-0"},[t._v(t._s(t.currentPage+1)+" / "+t._s(t.pages))]),e("ul",{staticClass:"pagination justify-content-center"},[e("li",{staticClass:"page-item",class:{disabled:""===t.prevUrl}},[e("button",{staticClass:"page-link",on:{click:function(a){return t.checkPage(t.prevUrl)}}},[t._v("Previous")])]),e("li",{staticClass:"page-item",class:{disabled:""===t.nextUrl}},[e("button",{staticClass:"page-link",on:{click:function(a){return t.checkPage(t.nextUrl)}}},[t._v("Next")])])])],1)},i=[],l=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container"},[e("div",{staticClass:"row"},t._l(t.products,(function(t){return e("div",{key:t._id,staticClass:"col-md-4 mb-3"},[e("Card",{attrs:{product:t}})],1)})),0)])},u=[],p=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"card",staticStyle:{width:"100%",height:"100%"}},[e("div",{staticClass:"card-body"},[e("router-link",{attrs:{tag:"a",to:{name:"product",params:{id:t.product._id}}}},[e("img",{staticClass:"card-img-top",attrs:{src:t.product.image,alt:t.product.name}})]),e("h5",{staticClass:"card-title text-info"},[t._v(t._s(t.product.name))]),e("p",[e("span",{staticClass:"font-weight-bold"},[t._v("Category")]),t._v(": "+t._s(t.product.category))]),e("p",{staticClass:"card-text"},[t._v(t._s(t.product.description.substring(0,50)))]),e("p",{staticClass:"card-text text-danger"},[t._v("$"+t._s(t.product.price))]),e("router-link",{staticClass:"btn btn-outline-primary mr-2",attrs:{tag:"a",to:{name:"product",params:{id:t.product._id}}}},[t._v("Desciption")]),e("button",{staticClass:"btn btn-primary",on:{click:function(a){return t.addToCart(t.product)}}},[t._v("Buy Now")])],1)])},d=[],m=(e("7514"),e("7f7f"),{methods:{addToCart:function(t){var a=JSON.parse(localStorage.getItem("cart"))||[];if(0===a.length){var e={id:t._id,name:t.name,price:t.price,subtotal:1*t.price,qty:1};a.push(e),this.$store.commit("setCart",e),localStorage.setItem("cart",JSON.stringify(a))}else{var r=a.find((function(a){return a.id===t._id}));if(r)r.qty++,r.subtotal=r.price*r.qty,this.$store.commit("setQuantity",r),this.$store.commit("setPrice",r),localStorage.setItem("cart",JSON.stringify(a));else{var n={id:t._id,name:t.name,price:t.price,subtotal:1*t.price,qty:1};a.push(n),this.$store.commit("setCart",n),localStorage.setItem("cart",JSON.stringify(a))}}}}}),f={props:["product"],mixins:[m]},h=f,g=(e("f75a"),e("2877")),v=Object(g["a"])(h,p,d,!1,null,"d95e1dbc",null),b=v.exports,_={props:["products"],components:{Card:b}},C=_,y=Object(g["a"])(C,l,u,!1,null,"ce1fbae2",null),k=y.exports,x=e("bc3a"),$=e.n(x),S=function(){return $.a.create({baseURL:"http://localhost:3000"})},O={components:{Cards:k},data:function(){return{products:[],currentPage:"",pages:"",prevUrl:"",nextUrl:""}},created:function(){var t=this;S().get("/products").then((function(a){t.products=a.data.products,t.currentPage=a.data.currentPage,t.pages=a.data.pages,t.nextUrl=a.data.nextUrl,t.prevUrl=a.data.prevUrl}))},methods:{checkPage:function(t){var a=this;S().get(t).then((function(t){a.products=t.data.products,a.currentPage=t.data.currentPage,a.pages=t.data.pages,a.nextUrl=t.data.nextUrl,a.prevUrl=t.data.prevUrl}))}}},P=O,w=Object(g["a"])(P,o,i,!1,null,"e1a781de",null),j=w.exports,E=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("nav",{staticClass:"navbar navbar-expand-lg navbar-light bg-light mb-3"},[e("div",{staticClass:"container"},[e("router-link",{staticClass:"navbar-brand",attrs:{tag:"a",to:{name:"home"}}},[t._v("Shopping Cart")]),t._m(0),e("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarNav"}},[e("ul",{staticClass:"navbar-nav  ml-auto"},[t._l(t.categories,(function(a){return e("li",{key:a._id,staticClass:"nav-item active"},[e("router-link",{staticClass:"nav-link",attrs:{tag:"a",to:{name:"category",params:{category:a.title}}}},[t._v(t._s(a.title))])],1)})),e("router-link",{staticClass:"nav-link",attrs:{tag:"a",to:{name:"checkout"}}},[t._v("Cart("),e("span",{staticClass:"badge badge-light"},[t._v(t._s(t.cart.length))]),t._v(")")])],2)])],1)])},N=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"}},[e("span",{staticClass:"navbar-toggler-icon"})])}],U={data:function(){return{categories:[]}},created:function(){var t=this;S().get("/categories").then((function(a){t.categories=a.data}))},computed:{cart:function(){return this.$store.getters.getCart}}},q=U,J=Object(g["a"])(q,E,N,!1,null,null,null),T=J.exports,I={name:"app",components:{Products:j,Navbar:T}},B=I,L=Object(g["a"])(B,s,c,!1,null,null,null),Q=L.exports,K=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-4"}),e("div",{staticClass:"col-md-8"},[e("img",{staticClass:"img-fluid",attrs:{src:t.product.image,alt:t.product.name}}),e("h5",[t._v(t._s(t.product.name))]),e("p",[e("span",{staticClass:"font-weight-bold"},[t._v("Category")]),t._v(": "+t._s(t.product.category))]),e("p",{staticClass:"text-danger font-weight-bold"},[t._v("$"+t._s(t.product.price))]),e("p",[t._v("\n        "+t._s(t.product.description)+"\n      ")]),e("button",{staticClass:"btn btn-outline-primary mb-5",on:{click:function(a){return t.addToCart(t.product)}}},[t._v("Buy Now")])])])])},M=[],Y={props:["id"],mixins:[m],data:function(){return{product:{}}},created:function(){var t=this;S().get("/products/".concat(this.id)).then((function(a){t.product=a.data}))},methods:{checkout:function(t){t.preventDefault(),this.$router.push({name:"checkout"}),console.log(t)}}},A=Y,D=Object(g["a"])(A,K,M,!1,null,null,null),F=D.exports,H=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("Cards",{attrs:{products:t.products}})},W=[],R={props:["category"],data:function(){return{products:[]}},components:{Cards:k},created:function(){this.fetch()},watch:{$route:function(t,a){a.params.category!==t.params.category&&this.fetch()}},methods:{fetch:function(){var t=this;S().get("/categories/".concat(this.category)).then((function(a){t.products=a.data}))}}},z=R,G=Object(g["a"])(z,H,W,!1,null,"5acaa3a6",null),V=G.exports,X=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[0==t.cart.length?e("div",[e("h3",{staticClass:"text-center text-danger"},[t._v("Your Cart is Empty !")])]):e("div",[e("table",{staticClass:"table stripped "},[t._m(0),e("tbody",t._l(t.cart,(function(a){return e("tr",{key:a.id},[e("td",[t._v(t._s(a.name))]),e("td",[t._v("$"+t._s(a.price))]),e("td",[t._v(t._s(a.qty))]),e("td",[t._v("$"+t._s(a.subtotal))]),e("td",[e("button",{staticClass:"btn btn-sm btn-info mr-1",on:{click:function(e){return t.action("min",a)}}},[t._v("-")]),e("button",{staticClass:"btn btn-sm btn-danger mr-1",on:{click:function(e){return t.action("clear",a)}}},[t._v("Clear")]),e("button",{staticClass:"btn btn-sm btn-info mr-1",on:{click:function(e){return t.action("add",a)}}},[t._v("+")])])])})),0)]),e("h4",[t._v("Total: $"+t._s(t.total))]),e("button",{staticClass:"btn btn-outline-primary",attrs:{id:"checkout"},on:{click:t.checkout}},[t._v("Checkout")])])])])])},Z=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",{attrs:{scope:"col"}},[t._v("Product")]),e("th",{attrs:{scope:"col"}},[t._v("Price")]),e("th",{attrs:{scope:"col"}},[t._v("Quantity")]),e("th",{attrs:{scope:"col"}},[t._v("SubTotat")]),e("th",{attrs:{scope:"col"}},[t._v("Actions")])])])}],tt={PUBLISHABLE_KEY:"pk_test_lJdbCvJNKqmvme8ThPD54LKS"},at={mounted:function(){var t=this,a=this.total;this.handler=StripeCheckout.configure({key:tt.PUBLISHABLE_KEY,image:"https://stripe.com/img/documentation/checkout/marketplace.png",locale:"auto",token:function(e){S().post("/charge",{stripeToken:e,total:a}).then((function(a){var e=a.data;t.$store.commit("setCharge",e),t.$router.push({name:"thankyou"}),localStorage.clear(),t.$store.state.cart=[]}))}})},computed:{cart:function(){return this.$store.getters.getCart},total:function(){var t=0;return this.cart.map((function(a){t+=a.subtotal})),t}},methods:{checkout:function(){this.handler.open({name:"Shopping Cart",description:"Web site for Shopping Cart",amount:100*this.total})},action:function(t,a){switch(t){case"add":a.qty++,a.subtotal=a.price*a.qty,this.$store.commit("setQuantity",a),this.$store.commit("setPrice",a),localStorage.setItem("cart",JSON.stringify(this.cart));break;case"min":a.qty--,a.subtotal=a.price*a.qty,this.$store.commit("setQuantity",a),this.$store.commit("setPrice",a),localStorage.setItem("cart",JSON.stringify(this.cart)),0===a.qty&&this.clearFromCart(a);break;case"clear":this.clearFromCart(a);break;default:break}},clearFromCart:function(t){var a=this.cart.find((function(a){return a.id===t.id})),e=this.cart.indexOf(a);this.cart.splice(e,1),localStorage.setItem("cart",JSON.stringify(this.cart))}}},et=at,rt=Object(g["a"])(et,X,Z,!1,null,null,null),nt=rt.exports,st=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"text-center"},[e("p",{staticClass:"text-danger mt-5"},[t._v("You will recieve an Email on "+t._s(t.email)+" soon, Thank you !")]),e("router-link",{staticClass:"btn btn-outline-primary",attrs:{tag:"a",to:{name:"home"}}},[t._v("Back to Web site")])],1)},ct=[],ot={computed:{email:function(){return this.$store.getters.getCharge.email}}},it=ot,lt=Object(g["a"])(it,st,ct,!1,null,null,null),ut=lt.exports,pt=[{path:"/",name:"home",component:j},{path:"/product/:id",name:"product",component:F,props:!0},{path:"/category/:category",name:"category",component:V,props:!0},{path:"/checkout",name:"checkout",component:nt},{path:"/thankyou",name:"thankyou",component:ut}],dt=new n["a"]({routes:pt,mode:"history"}),mt=dt,ft=e("2f62");r["a"].use(ft["a"]);var ht=new ft["a"].Store({state:{cart:JSON.parse(localStorage.getItem("cart"))||[],charge:{}},mutations:{setCart:function(t,a){t.cart.push(a)},setQuantity:function(t,a){var e=t.cart.find((function(t){return t.id===a.id}));e.qty=a.qty},setPrice:function(t,a){var e=t.cart.find((function(t){return t.id===a.id}));e.subtotal=a.subtotal},setCharge:function(t,a){t.charge=a}},getters:{getCart:function(t){return t.cart},getCharge:function(t){return t.charge}}});r["a"].config.productionTip=!1,r["a"].use(n["a"]),new r["a"]({store:ht,router:mt,render:function(t){return t(Q)}}).$mount("#app")},"5d1e":function(t,a,e){},f75a:function(t,a,e){"use strict";var r=e("5d1e"),n=e.n(r);n.a}});
//# sourceMappingURL=app.39da7940.js.map